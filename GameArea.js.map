{"version":3,"file":"GameArea.js","sourceRoot":"","sources":["src/GameArea.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css } from 'lit';\r\nimport { customElement } from 'lit/decorators.js';\r\nimport './Lion';\r\nimport './Pipe';\r\n\r\n@customElement('game-area')\r\nexport class GameArea extends LitElement {\r\n  static override styles = css`\r\n    .game-area {\r\n      width: 80vw; /* Reduced width */\r\n      height: 80vh; /* Reduced height */\r\n      background-color: skyblue;\r\n      overflow: hidden;\r\n      position: relative;\r\n      margin: auto; /* Center the game area */\r\n      border: 2px solid black; /* Optional: Add a border for better visibility */\r\n    }\r\n    flappy-lion {\r\n      --lion-top: 50px;\r\n      --lion-left: 50px;\r\n      width: 50px; /* Add width */\r\n      height: 50px; /* Add height */\r\n      position: absolute;\r\n      top: var(--lion-top);\r\n      left: var(--lion-left);\r\n    }\r\n    flappy-pipe {\r\n      width: 50px;\r\n      height: var(--pipe-height);\r\n      position: absolute;\r\n      top: 0;\r\n      left: var(--pipe-left);\r\n    }\r\n    .modal {\r\n      display: none; /* Hidden by default */\r\n      position: fixed;\r\n      z-index: 1;\r\n      left: 0;\r\n      top: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      overflow: auto;\r\n      background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */\r\n    }\r\n    .modal-content {\r\n      background-color: #fefefe;\r\n      margin: 15% auto;\r\n      padding: 20px;\r\n      border: 1px solid #888;\r\n      width: 80%;\r\n      text-align: center;\r\n      font-size: 2em;\r\n      font-weight: bold;\r\n    }\r\n    .show {\r\n      display: block; /* Show the modal */\r\n    }\r\n  `;\r\n\r\n  lion: HTMLElement | null = null;\r\n  pipe: HTMLElement | null = null;\r\n  lionVelocity: number = 0;\r\n  pipeSpeed: number = 0.5;\r\n  gameInterval: number | undefined;\r\n\r\n  override firstUpdated() {\r\n    this.lion = this.shadowRoot!.querySelector('flappy-lion');\r\n    this.pipe = this.shadowRoot!.querySelector('flappy-pipe');\r\n    this.startGame();\r\n  }\r\n\r\n  startGame() {\r\n    this.gameInterval = window.setInterval(() => {\r\n      this.updateLion();\r\n      this.updatePipe();\r\n      this.checkCollision();\r\n    }, 20);\r\n  }\r\n\r\n  updateLion() {\r\n    if (this.lion) {\r\n      const lionTop = parseFloat(getComputedStyle(this.lion).getPropertyValue('--lion-top')) || 0;\r\n      this.lion.style.setProperty('--lion-top', `${lionTop}px`);\r\n    }\r\n  }\r\n\r\n  updatePipe() {\r\n    if (this.pipe) {\r\n      const pipeLeft = parseFloat(getComputedStyle(this.pipe).getPropertyValue('--pipe-left')) || 0;\r\n      this.pipe.style.setProperty('--pipe-left', `${pipeLeft - this.pipeSpeed}%`);\r\n      if (pipeLeft < -10) {\r\n        this.pipe.style.setProperty('--pipe-left', '100%');\r\n        const randomHeight = Math.floor(Math.random() * (this.clientHeight - 50)) + 50; // Random height between 50px and game area height - 50px\r\n        this.pipe.style.setProperty('--pipe-height', `${randomHeight}px`);\r\n      }\r\n    }\r\n  }\r\n\r\n  isColliding(rect1: DOMRect, rect2: DOMRect): boolean {\r\n    const tolerance = -0.2; // 20% tolerance of collision\r\n  \r\n    const rect1Adjusted = {\r\n      left: rect1.left - rect1.width * tolerance,\r\n      right: rect1.right + rect1.width * tolerance,\r\n      top: rect1.top - rect1.height * tolerance,\r\n      bottom: rect1.bottom + rect1.height * tolerance,\r\n    };\r\n  \r\n    const rect2Adjusted = {\r\n      left: rect2.left - rect2.width * tolerance,\r\n      right: rect2.right + rect2.width * tolerance,\r\n      top: rect2.top - rect2.height * tolerance,\r\n      bottom: rect2.bottom + rect2.height * tolerance,\r\n    };\r\n  \r\n    return (\r\n      rect1Adjusted.left < rect2Adjusted.right &&\r\n      rect1Adjusted.right > rect2Adjusted.left &&\r\n      rect1Adjusted.top < rect2Adjusted.bottom &&\r\n      rect1Adjusted.bottom > rect2Adjusted.top\r\n    );\r\n  }\r\n  \r\n  checkCollision() {\r\n    if (this.lion && this.pipe) {\r\n      const lionRect = this.lion.getBoundingClientRect();\r\n      const pipeRect = this.pipe.getBoundingClientRect();\r\n  \r\n      if (this.isColliding(lionRect, pipeRect)) {\r\n        console.log('Collision detected!');\r\n        this.endGame();\r\n      }\r\n    }\r\n  }\r\n\r\n  endGame() {\r\n    clearInterval(this.gameInterval);\r\n    console.log('Game Over');\r\n    const modal = this.shadowRoot!.querySelector('.modal');\r\n    if (modal) {\r\n      modal.classList.add('show');\r\n    }\r\n  }\r\n\r\n  handleKeyPress(event: KeyboardEvent) {\r\n    if (this.lion) {\r\n      const lionTop = parseFloat(getComputedStyle(this.lion).getPropertyValue('--lion-top')) || 0;\r\n      const lionLeft = parseFloat(getComputedStyle(this.lion).getPropertyValue('--lion-left')) || 0;\r\n\r\n      switch (event.code) {\r\n        case 'ArrowUp':\r\n          this.lion.style.setProperty('--lion-top', `${lionTop - 10}px`);\r\n          break;\r\n        case 'ArrowDown':\r\n          this.lion.style.setProperty('--lion-top', `${lionTop + 10}px`);\r\n          break;\r\n        case 'ArrowLeft':\r\n          this.lion.style.setProperty('--lion-left', `${lionLeft - 10}px`);\r\n          break;\r\n        case 'ArrowRight':\r\n          this.lion.style.setProperty('--lion-left', `${lionLeft + 10}px`);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  override connectedCallback() {\r\n    super.connectedCallback();\r\n    window.addEventListener('keydown', this.handleKeyPress.bind(this));\r\n  }\r\n\r\n  override disconnectedCallback() {\r\n    super.disconnectedCallback();\r\n    window.removeEventListener('keydown', this.handleKeyPress.bind(this));\r\n    clearInterval(this.gameInterval);\r\n  }\r\n\r\n  override render() {\r\n    return html`\r\n      <div class=\"game-area\">\r\n        <flappy-lion></flappy-lion>\r\n        <flappy-pipe style=\"--pipe-left: 80%; --pipe-height: 150px;\"></flappy-pipe>\r\n      </div>\r\n      <div class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          Game Over\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n}"]}